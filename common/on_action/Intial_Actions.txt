on_game_start = {
	on_actions = {
		on_867_start
		on_1066_start
		courtier_effect
	}
}
on_867_start = {
	trigger = {
		current_date > 866.12.31
	}
	effect = {
		867_oghuz_char_effect = yes
		867_mashriqi_char_effect = yes
		867_andalusian_char_effect = yes
		867_georgian_char_effect = yes
		867_greek_char_effect = yes
		867_alan_char_effect = yes
		867_magherb_char_effect = yes
		867_kurdish_char_effect = yes
		867_khwarezmian_char_effect = yes
		867_uyghur_char_effect = yes
		867_persian_char_effect = yes
		867_egyptian_char_effect = yes
		867_bedouin_char_effect = yes
		867_leftover_arabic_char_effect = yes
		867_armenian_char_effect = yes
		867_assyrian_char_effect = yes
		867_khazar_char_effect = yes
		867_pecheneg_char_effect = yes
		867_kipchak_effect = yes
	}
}
on_1066_start = {
	trigger = {
		current_date > 1066.9.14
	}
	effect = {
		1066_oghuz_char_effect = yes
		1066_georgian_char_effect = yes
		1066_alan_char_effect = yes
		1066_kurdish_char_effect = yes
		1066_greek_char_effect = yes
		1066_magherb_char_effect = yes
		1066_andalusian_char_effect = yes
		1066_pecheneg_char_effect = yes
		1066_mashriqi_char_effect = yes
		1066_persian_char_effect = yes
		1066_egyptian_char_effect = yes
	}
}
eldest_son_fix = {
	effect = {
		every_living_character = {
			limit = {
				has_religion = religion:islam_religion
				culture = {
					is_npe_supported_culture = yes
				}
				any_child = {
					is_male = yes
					exists = this
				}
			}
			add_character_flag = had_eldest_son
		}
	}
}
random_yearly_everyone_pulse = {
	on_actions = {
		courtiers_action
	}
}
courtiers_action = {
	trigger = {
		culture = {
			is_npe_supported_culture = yes
		}
		save_temporary_scope_as = to_be_checked
		is_lowborn = yes
		NOT = {
			any_in_global_list = {
				variable = name_pack_support_global
				this = scope:to_be_checked
			}
		}
	}
	effect = {
		name_gen_effect = yes
	}
}
courtier_effect = {
	effect = {
		every_living_character = {
			limit = {
				save_temporary_scope_as = thecourt
				is_lowborn = yes
				culture = {
					is_npe_supported_culture = yes
				}
				OR = {
					is_foreign_court_or_pool_guest = yes
					is_courtier = yes
				}
				NOT = {
					any_in_global_list = {
						variable = name_pack_support_global
						this = scope:thecourt
					}
				}
			}
			name_gen_effect = yes
		}
		every_living_character = {
			limit = {
				save_temporary_scope_as = thebarontemp
				highest_held_title_tier = tier_barony
				culture = {
					is_npe_supported_culture = yes
				}
				NOT = {
					any_in_global_list = {
						variable = name_pack_support_global
						this = scope:thebarontemp
					}
				}
			}
			name_gen_effect = yes
			if = {
				limit = {
					exists = dynasty
					NOT = {
						exists = house.var:name_founder
					}
				}
				save_scope_as = thebaron
				set_global_variable = {
					name = temp_head
					value = scope:thebaron
				}
				scope:thebaron.dynasty = {
					set_dynasty_name = "[Localize(Concatenate(Concatenate(GetGlobalVariable('temp_head').Char.GetFirstNameNoTooltip, GetGlobalVariable('temp_head').Char.Custom('CharacterCulture')), '_set_house'))]"
				}
				scope:thebaron.house = {
					set_house_name = "[Localize(Concatenate(Concatenate(GetGlobalVariable('temp_head').Char.GetFirstNameNoTooltip, GetGlobalVariable('temp_head').Char.Custom('CharacterCulture')), '_set_house'))]"
					set_variable = {
						name = name_founder
						value = scope:thebaron
					}
				}
				remove_global_variable = temp_head
			}
		}
	}
}