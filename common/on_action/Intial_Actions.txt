on_game_start = {
	on_actions = {
		on_867_start
		on_1066_start
		courtier_effect
	}
}
on_game_start_after_lobby = {
	on_actions = {
		set_dynasty_name_oa
	}
}
on_867_start = {
	trigger = {
		current_date > 866.12.31
	}
	effect = {
		867_oghuz_char_effect = yes
		867_mashriqi_char_effect = yes
		867_andalusian_char_effet = yes
		867_georgian_char_effect = yes
		867_greek_char_effect = yes
		867_alan_char_effect = yes
		867_magherb_char_effect = yes
		867_kurdish_char_effect = yes
		867_khwarezmian_char_effect = yes
		867_uyghur_char_effect = yes
	}
}
on_1066_start = {
	trigger = {
		current_date > 1066.9.14
	}
	effect = {
		1066_oghuz_char_effect = yes
		1066_georgian_char_effect = yes
		1066_alan_char_effect = yes
		1066_kurdish_char_effect = yes
		1066_greek_char_effect = yes
	}
}
courtier_effect = {
	effect = {
		every_living_character = {
			limit = {
				save_temporary_scope_as = thecourt
				is_lowborn = yes
				culture = {
					is_cnp_supported_culture = yes
				}
				OR = {
					is_foreign_court_or_pool_guest = yes
					is_courtier = yes
				}
				NOT = {
					any_in_global_list = {
						variable = name_pack_support_global
						this = scope:thecourt
					}
				}
			}
			name_gen_effect = yes
		}
		every_living_character = {
			limit = {
				save_temporary_scope_as = thebaron
				highest_held_title_tier = tier_barony
				culture = {
					is_cnp_supported_culture = yes
				}
				NOT = {
					any_in_global_list = {
						variable = name_pack_support_global
						this = scope:thebaron
					}
				}
			}
			name_gen_effect = yes
		}
	}
}
set_dynasty_name_oa = {
	effect = {
		every_living_character = {
			limit = {
				save_temporary_scope_as = thebaron
				highest_held_title_tier = tier_barony
				culture = {
					is_cnp_supported_culture = yes
				}
				exists = dynasty
				dynasty = {
					any_in_list = {
						variable = name_pack_support_dynasty
						this = scope:thebaron
					}
				}
			}
			save_scope_as = thebaron
			every_player = {
				set_variable = {
					name = temp_head
					value = scope:thebaron
				}
			}
			scope:thebaron.dynasty = {
				set_dynasty_name = "[Localize(Concatenate(Concatenate(GetPlayer.MakeScope.Var('temp_head').Char.GetFirstNameNoTooltip, GetPlayer.MakeScope.Var('temp_head').Char.Custom('CharacterCulture')), '_set_house'))]"
			}
			scope:thebaron.house = {
				set_house_name = "[Localize(Concatenate(Concatenate(GetPlayer.MakeScope.Var('temp_head').Char.GetFirstNameNoTooltip, GetPlayer.MakeScope.Var('temp_head').Char.Custom('CharacterCulture')), '_set_house'))]"
				set_variable = {
					name = name_founder
					value = scope:thebaron
				}
			}
			every_player = {
				remove_variable = temp_head
			}
		}
	}
}